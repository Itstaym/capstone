<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Library Management System - Login</title>
  <link rel="stylesheet" href="main_login.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
  <div class="wrapper">
    <div class="ptc-logo">
      <img src="https://www.paterostechnologicalcollege.edu.ph/ASSETS/IMAGES/LOGO/logo-ptc.png" alt="PTC Logo" class="logo">
    </div>
    <div class="login-container">
      <h2>Login</h2>
      <!-- FIX 1: Pass the 'event' object to the login function -->
      <form onsubmit="login(event)">
        <input type="text" id="username" placeholder="Username" required>
        <div class="password-wrapper">
          <input type="password" id="password" placeholder="Password" required>
          <i class="fa-solid fa-eye" onclick="showPassword()" title="Show Password"></i>
        </div>
        <button type="submit">Login</button>
      </form>
    </div>
  </div>
  
  <script>
    function showPassword() {
      const passwordField = document.getElementById('password');
      const eyeIcon = document.querySelector('.password-wrapper i');
      if (passwordField.type === "password") {
        passwordField.type = "text";
        eyeIcon.classList.remove('fa-eye');
        eyeIcon.classList.add('fa-eye-slash');
      } else {
        passwordField.type = "password";
        eyeIcon.classList.remove('fa-eye-slash');
        eyeIcon.classList.add('fa-eye');
      }
    }

    // FIX 1: Accept the 'event' object as a parameter
    function login(event) {
      // And prevent the default page reload behavior
      event.preventDefault();

      const name = document.getElementById('username').value;
      const pw = document.getElementById('password').value;
  
      let role = null;

      // Note: I've updated these to match your folder names for consistency
      if (name === "admin" && pw === "password1") {
        role = 'admin'; 
      }
      else if (name === "librarian" && pw === "password2") {
        role = 'librarian';
      }
      else if (name === "student" && pw === "password3") {
        role = 'user'; // Changed to 'user' to match the folder path
      }

      switch (role) { 
        case 'admin':
          // FIX 2: Corrected path to go up only one level
          window.location.href = "../admin/main/admin_main.html";
          break;
        case 'librarian':
          window.location.href = "../librarian/main/main.html";
          break;
        case 'user': // This case must match the role set above
          window.location.href = "../user/main/user_main.html";
          break;
        default:
          alert("Invalid credentials");
      }
    }
  </script>
</body>
</html>